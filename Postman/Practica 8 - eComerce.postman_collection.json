{
	"info": {
		"_postman_id": "fc3b3975-01c0-421a-acfe-aaac17abde76",
		"name": "Practica 8 - eComerce",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "21334713"
	},
	"item": [
		{
			"name": "Obtener categorias",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Validar el codigo de respuesta\", function(){\r",
							"    pm.response.to.have.status(200)\r",
							"})\r",
							"\r",
							"pm.test(\"Validar que el body no esta vacio\", function(){\r",
							"    pm.response.to.be.withBody;\r",
							"})\r",
							"\r",
							"\r",
							"pm.test(\"Validar que el body respose contiene la palabra categories\", function(){\r",
							"    pm.expect(pm.response.text()).to.include(\"categories\")\r",
							"})\r",
							"\r",
							"\r",
							"const responseJson = pm.response.json()\r",
							"console.log(responseJson.categories[0].all_label)\r",
							"\r",
							"console.log(responseJson.categories[0].categories[0].code)\r",
							"\r",
							"\r",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"protocolProfileBehavior": {
				"disableBodyPruning": true
			},
			"request": {
				"method": "GET",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "https://{{url_base}}/nga/api/v1.1/public/categories/filter?lang=es",
					"protocol": "https",
					"host": [
						"{{url_base}}"
					],
					"path": [
						"nga",
						"api",
						"v1.1",
						"public",
						"categories",
						"filter"
					],
					"query": [
						{
							"key": "lang",
							"value": "es"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "Crear Usuario",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"//email:pass\r",
							"\r",
							"let numero_random = Math.floor(Math.random() * Math.floor(999999) + 50)\r",
							"var correo = 'ventas' + numero_random.toString(36) + '@mailinator.com'\r",
							"\r",
							"pm.environment.set('correo', correo)\r",
							"\r",
							"var preencode = (pm.environment.get('correo')).concat(':',(pm.environment.get('password')));\r",
							"\r",
							"var encoded = CryptoJS.enc.Base64.stringify(CryptoJS.enc.Utf8.parse(preencode))\r",
							"pm.environment.set('base64', encoded)\r",
							"\r",
							"console.log(encoded)\r",
							""
						],
						"type": "text/javascript"
					}
				},
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Validar el codigo de respuesta\", function(){\r",
							"    //Se espera un 401 ya que no se puede verificar la cuenta\r",
							"    pm.expect(pm.response.code).to.eql(401)\r",
							"})\r",
							"\r",
							"pm.test(\"Validar que hay un body response\", function(){\r",
							"    pm.response.to.be.withBody;\r",
							"})\r",
							"\r",
							"pm.test(\"Prueba negativa, Validar mensaje 'ACCOUNT_VERIFICATION_REQUIRED'\", function(){\r",
							"    var responseJson = pm.response.json()\r",
							"    pm.expect(responseJson.error.code).to.include('ACCOUNT_VERIFICATION_REQUIRED')\r",
							"})\r",
							"\r",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Authorization",
						"value": "Basic {{base64}}",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\"account\":{\"email\":\"{{correo}}\"}}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "https://{{url_base}}/nga/api/v1.1/private/accounts?lang=es",
					"protocol": "https",
					"host": [
						"{{url_base}}"
					],
					"path": [
						"nga",
						"api",
						"v1.1",
						"private",
						"accounts"
					],
					"query": [
						{
							"key": "lang",
							"value": "es"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "Obtener mi usuario",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"//Setear variables\r",
							"var jsonResponse = pm.response.json()\r",
							"console.log(\"AccessToken = \"+ jsonResponse.access_token)\r",
							"\r",
							"pm.environment.set(\"accessToken\", jsonResponse.access_token)\r",
							"pm.environment.set(\"accountId\", jsonResponse.account.account_id)\r",
							"pm.environment.set(\"uuid\", jsonResponse.account.uuid)\r",
							"\r",
							"//Tests\r",
							"\r",
							"pm.test(\"Validar el codigo de respuesta\", function(){\r",
							"    pm.expect(pm.response.code).to.eql(200)\r",
							"})\r",
							"\r",
							"pm.test(\"Validar que hay un body response\", function(){\r",
							"    pm.response.to.be.withBody;\r",
							"})\r",
							"\r",
							"pm.test(\"Validar que el email del response sea el indicado\", function(){\r",
							"    let responseJson = pm.response.json()\r",
							"    let email = pm.environment.get(\"email\")\r",
							"    pm.expect(responseJson.account.email).to.be.equal(email)\r",
							"})\r",
							"\r",
							""
						],
						"type": "text/javascript"
					}
				},
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"console.log(\"Prescript - obteniendo variables\")\r",
							"\r",
							"var email =  pm.environment.get('email')\r",
							"var pass = pm.environment.get('password')\r",
							"var url = pm.environment.get('url_base')\r",
							"url = 'https://' + url + '/nga/api/v1.1/private/accounts?lang=es'\r",
							"\r",
							"/*Con la siguiente seccion de Json declaramos los valores que pondriamos\r",
							"tanto en la pestaÃ±a 'Authorization' y en 'Body'\r",
							"*/\r",
							"\r",
							"let requestToken = {\r",
							"    method: \"POST\",\r",
							"    url: url,\r",
							"    auth: {\r",
							"        type: \"basic\",\r",
							"        basic: [\r",
							"            {key: \"username\", value: email},\r",
							"            {key: \"password\", value: pass}\r",
							"        ]\r",
							"    },\r",
							"    body: {\r",
							"        \"account\":\r",
							"            {\"email\": email}\r",
							"    }\r",
							"}\r",
							"\r",
							"pm.sendRequest(requestToken, function (err, response) {\r",
							"    console.log(response.json());\r",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"protocolProfileBehavior": {
				"disabledSystemHeaders": {
					"accept": true
				}
			},
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Authorization",
						"value": "Basic {{tokenBasic}}",
						"type": "text"
					},
					{
						"key": "Origin",
						"value": "https://www.segundamano.mx",
						"type": "text"
					},
					{
						"key": "Accept",
						"value": "application/json, text/plain, */*",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "https://{{url_base}}/nga/api/v1.1/private/accounts?lang=es",
					"protocol": "https",
					"host": [
						"{{url_base}}"
					],
					"path": [
						"nga",
						"api",
						"v1.1",
						"private",
						"accounts"
					],
					"query": [
						{
							"key": "lang",
							"value": "es"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "Obtener informacion del usuario",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"var jsonData = pm.response.json()\r",
							"\r",
							"pm.environment.set(\"name\", jsonData.account.name)\r",
							"\r",
							"var uuidVar = pm.environment.get('uuid')\r",
							"\r",
							"//Tests\r",
							"\r",
							"pm.test(\"Validar el codigo de respuesta\", function(){\r",
							"    pm.expect(pm.response.code).to.eql(200)\r",
							"})\r",
							"\r",
							"pm.test(\"Validar que hay un body response\", function(){\r",
							"    pm.response.to.be.withBody;\r",
							"})\r",
							"\r",
							"pm.test(\"Validar el uuid\", ()=>{\r",
							"    pm.expect(jsonData.account.uuid).to.eql(uuidVar)\r",
							"})\r",
							"\r",
							"\r",
							"\r",
							"\r",
							"\r",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Authorization",
						"value": "tag:scmcoord.com,2013:api {{accessToken}}",
						"type": "text"
					}
				],
				"url": {
					"raw": "https://{{url_base}}/nga/api/v1{{accountId}}?lang=es",
					"protocol": "https",
					"host": [
						"{{url_base}}"
					],
					"path": [
						"nga",
						"api",
						"v1{{accountId}}"
					],
					"query": [
						{
							"key": "lang",
							"value": "es"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "Actualizar telefono",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"let numero_random = Math.floor(Math.random() * Math.floor(99999999) + 50)\r",
							"console.log(numero_random)\r",
							"pm.environment.set(\"telefono\", numero_random)"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "PATCH",
				"header": [
					{
						"key": "Authorization",
						"value": "tag:scmcoord.com,2013:api {{accessToken}}",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\"account\":{\"name\":\"{{name}}\",\"phone\":\"{{telefono}}\",\"professional\":false}}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "https://{{url_base}}/nga/api/v1{{accountId}}?lang=es",
					"protocol": "https",
					"host": [
						"{{url_base}}"
					],
					"path": [
						"nga",
						"api",
						"v1{{accountId}}"
					],
					"query": [
						{
							"key": "lang",
							"value": "es"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "Crear anuncio",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"let responseJson = pm.response.json()\r",
							"\r",
							"//console.log(responseJson.data.ad.ad_id)\r",
							"pm.environment.set('ad_id', responseJson.data.ad.ad_id)\r",
							"\r",
							"//Tests\r",
							"\r",
							"pm.test(\"Successful POST request\", function () {\r",
							"    pm.expect(pm.response.code).to.be.oneOf([201, 202]);\r",
							"});\r",
							"\r",
							"pm.test(\"Validar que hay un body response\", function(){\r",
							"    pm.response.to.be.withBody;\r",
							"})\r",
							"\r",
							"pm.test(\"Validar que el ID de la publicacion se maneje como un dato de tipo String\", function(){\r",
							"    let responseJson = pm.response.json()\r",
							"    pm.expect(responseJson.data.ad.ad_id).to.be.string\r",
							"})\r",
							""
						],
						"type": "text/javascript"
					}
				},
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"let getTokenRequest = {\r",
							"    method: 'POST',\r",
							"    url: 'https://webapi.segundamano.mx/nga/api/v1.1/private/accounts?lang=es',\r",
							"    header: {\r",
							"        Authorization: 'Basic dGVzdDQ1X3FhQG1haWxpbmF0b3IuY29tOjEyMzQ1Ng=='\r",
							"    }\r",
							"}\r",
							"\r",
							"\r",
							"pm.sendRequest(getTokenRequest, function (err, response) {\r",
							"    console.log(response.json());\r",
							"    var responseJson = response.json()\r",
							"    console.log(responseJson.access_token)\r",
							"\r",
							"    pm.environment.set(\"accessToken\", responseJson.access_token)\r",
							"\r",
							"});\r",
							"\r",
							"var uuid = pm.environment.get('uuid')\r",
							"var token = pm.environment.get('accessToken')\r",
							"\r",
							"console.log(\"TokenGet:\", token)\r",
							"\r",
							"var preencode = (uuid).concat(':',(token));\r",
							"\r",
							"var encoded = CryptoJS.enc.Base64.stringify(CryptoJS.enc.Utf8.parse(preencode))\r",
							"pm.environment.set('token2UP', encoded)\r",
							"\r",
							"console.log(encoded)"
						],
						"type": "text/javascript"
					}
				}
			],
			"protocolProfileBehavior": {
				"disabledSystemHeaders": {
					"accept": true
				}
			},
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Authorization",
						"value": "Basic {{token2UP}}",
						"type": "text"
					},
					{
						"key": "Accept",
						"value": "application/json, text/plain, */*",
						"type": "text"
					},
					{
						"key": "Origin",
						"value": "https://www.segundamano.mx",
						"type": "text"
					},
					{
						"key": "x-source",
						"value": "PHOENIX_DESKTOP",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\"category\":\"8121\",\"subject\":\"Mudanzas y fletes economicos\",\"body\":\"Mudanzas y feltes varatos a tu ciudad (prueba no real)\",\"region\":\"4\",\"municipality\":\"86179\",\"area\":\"142027\",\"price\":\"1\",\"phone_hidden\":\"false\",\"show_phone\":\"true\",\"contact_phone\":\"{{telefono}}\"}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "https://{{url_base}}/v2/accounts/{{uuid}}/up",
					"protocol": "https",
					"host": [
						"{{url_base}}"
					],
					"path": [
						"v2",
						"accounts",
						"{{uuid}}",
						"up"
					]
				}
			},
			"response": []
		},
		{
			"name": "Editar anuncio",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Validar el codigo de respuesta\", function(){\r",
							"    pm.expect(pm.response.code).to.eql(200)\r",
							"})\r",
							"\r",
							"pm.test(\"Validar que hay un body response\", function(){\r",
							"    pm.response.to.be.withBody;\r",
							"})\r",
							"\r",
							"pm.test(\"Prueba negativa, telefono sin lada no debe ser valido\", function(){\r",
							"    let responseJson = pm.response.json()\r",
							"    pm.expect(responseJson.data.ad.subject).to.be.equal(\"Modificado\")\r",
							"})\r",
							"\r",
							""
						],
						"type": "text/javascript"
					}
				},
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"var uuid = pm.environment.get('uuid')\r",
							"var token = pm.environment.get('accessToken')\r",
							"\r",
							"var preencode = (uuid).concat(':',(token));\r",
							"\r",
							"var encoded = CryptoJS.enc.Base64.stringify(CryptoJS.enc.Utf8.parse(preencode))\r",
							"pm.environment.set('token2UP', encoded)\r",
							"\r",
							"console.log(encoded)"
						],
						"type": "text/javascript"
					}
				}
			],
			"protocolProfileBehavior": {
				"disabledSystemHeaders": {
					"accept": true
				}
			},
			"request": {
				"method": "PUT",
				"header": [
					{
						"key": "Authorization",
						"value": "Basic {{token2UP}}",
						"type": "text"
					},
					{
						"key": "Accept",
						"value": "application/json, text/plain, */*",
						"type": "text"
					},
					{
						"key": "Origin",
						"value": "https://www.segundamano.mx",
						"type": "text"
					},
					{
						"key": "x-source",
						"value": "PHOENIX_DESKTOP",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\"category\":\"8121\",\"subject\":\"Modificado\",\"body\":\"Mudanzas y feltes a toda la republica(prueba no real)\",\"region\":\"4\",\"municipality\":\"86179\",\"area\":\"142027\",\"price\":\"1\",\"phone_hidden\":\"false\",\"show_phone\":\"true\",\"contact_phone\":\"{{telefono}}\"}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "https://{{url_base}}/accounts/{{uuid}}/up/{{ad_id}}",
					"protocol": "https",
					"host": [
						"{{url_base}}"
					],
					"path": [
						"accounts",
						"{{uuid}}",
						"up",
						"{{ad_id}}"
					]
				}
			},
			"response": []
		},
		{
			"name": "Borrar anuncio",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"let getTokenRequest = {\r",
							"    method: 'POST',\r",
							"    url: 'https://webapi.segundamano.mx/nga/api/v1.1/private/accounts?lang=es',\r",
							"    header: {\r",
							"        Authorization: 'Basic dGVzdDQ1X3FhQG1haWxpbmF0b3IuY29tOjEyMzQ1Ng=='\r",
							"    }\r",
							"}\r",
							"\r",
							"pm.sendRequest(getTokenRequest, function (err, response) {\r",
							"    console.log(response.json());\r",
							"    var responseJson = response.json()\r",
							"    console.log(responseJson.access_token)\r",
							"\r",
							"    pm.environment.set(\"accessToken\", responseJson.access_token)\r",
							"    //Poner en una variable el accessToken que se genero aqui\r",
							"});"
						],
						"type": "text/javascript"
					}
				},
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Validar el codigo de respuesta\", function(){\r",
							"    //Manda un codigo 403 ya que el anuncio no esta publicado\r",
							"    pm.expect(pm.response.code).to.eql(403)\r",
							"})\r",
							"\r",
							"pm.test(\"Validar que hay un body response\", function(){\r",
							"    pm.response.to.be.withBody;\r",
							"})\r",
							"\r",
							"pm.test(\"Prueba negativa, mostrar que el mensaje indique 'ERROR_AD_ALREADY_DELETED'\", function(){\r",
							"    let responseJson = pm.response.json()\r",
							"    pm.expect(responseJson.error.causes[0].code).to.be.equal(\"ERROR_AD_ALREADY_DELETED\")\r",
							"})"
						],
						"type": "text/javascript"
					}
				}
			],
			"protocolProfileBehavior": {
				"disabledSystemHeaders": {
					"accept": true
				}
			},
			"request": {
				"method": "DELETE",
				"header": [
					{
						"key": "Authorization",
						"value": "tag:scmcoord.com,2013:api {{accessToken}}",
						"type": "text"
					},
					{
						"key": "Accept",
						"value": "application/json, text/plain, */*",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\"delete_reason\":{\"code\":\"5\"}}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "https://{{url_base}}/nga/api/v1{{accountId}}/klfst/{{ad_id}}",
					"protocol": "https",
					"host": [
						"{{url_base}}"
					],
					"path": [
						"nga",
						"api",
						"v1{{accountId}}",
						"klfst",
						"{{ad_id}}"
					]
				}
			},
			"response": []
		},
		{
			"name": "Anuncios pendientes",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Validar el codigo de respuesta\", function(){\r",
							"    pm.expect(pm.response.code).to.eql(200)\r",
							"})\r",
							"\r",
							"pm.test(\"Validar que hay un body response\", function(){\r",
							"    pm.response.to.be.withBody;\r",
							"})\r",
							"\r",
							"pm.test(\"Validar que hay por lo menos un anuncio pendiente\", function(){\r",
							"    let responseJson = pm.response.json()\r",
							"    pm.expect(responseJson.counter_map.pending).to.be.above(0)\r",
							"})\r",
							"\r",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Authorization",
						"value": "tag:scmcoord.com,2013:api {{accessToken}}",
						"type": "text"
					}
				],
				"url": {
					"raw": "https://{{url_base}}/nga/api/v1{{accountId}}/klfst?status=pending&lim=20&o=0&query=&lang=es",
					"protocol": "https",
					"host": [
						"{{url_base}}"
					],
					"path": [
						"nga",
						"api",
						"v1{{accountId}}",
						"klfst"
					],
					"query": [
						{
							"key": "status",
							"value": "pending"
						},
						{
							"key": "lim",
							"value": "20"
						},
						{
							"key": "o",
							"value": "0"
						},
						{
							"key": "query",
							"value": ""
						},
						{
							"key": "lang",
							"value": "es"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "Crear direccion",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"var responseJson = pm.response.json()\r",
							"\r",
							"pm.environment.set('addressID', responseJson.addressID)\r",
							"\r",
							"//Tests\r",
							"\r",
							"pm.test(\"Successful POST request\", function () {\r",
							"    pm.expect(pm.response.code).to.be.oneOf([201, 202]);\r",
							"});\r",
							"\r",
							"pm.test(\"Validar que hay un body response\", function(){\r",
							"    pm.response.to.be.withBody;\r",
							"})\r",
							"\r",
							"pm.test(\"Validar que el addressID es un String\", function(){\r",
							"    let responseJson = pm.response.json()\r",
							"    pm.expect(responseJson.addressID).to.be.string\r",
							"})\r",
							"\r",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"protocolProfileBehavior": {
				"disabledSystemHeaders": {
					"accept": true
				}
			},
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Authorization",
						"value": "Basic {{token2UP}}",
						"type": "text"
					},
					{
						"key": "Accept",
						"value": "application/json, text/plain, */*",
						"type": "text"
					},
					{
						"key": "Origin",
						"value": "https://www.segundamano.mx",
						"type": "text"
					},
					{
						"warning": "This is a duplicate header and will be overridden by the Content-Type header generated by Postman.",
						"key": "Content-Type",
						"value": "application/x-www-form-urlencoded",
						"type": "text"
					}
				],
				"body": {
					"mode": "urlencoded",
					"urlencoded": [
						{
							"key": "contact",
							"value": "Pancho Lopez",
							"type": "text"
						},
						{
							"key": "phone",
							"value": "1022336655",
							"type": "text"
						},
						{
							"key": "rfc",
							"value": "CPFJ911130ZC0",
							"type": "text"
						},
						{
							"key": "zipCode",
							"value": "11011",
							"type": "text"
						},
						{
							"key": "exteriorInfo",
							"value": "Miguel Hidalgo300",
							"type": "text"
						},
						{
							"key": "interiorInfo",
							"value": "",
							"type": "text"
						},
						{
							"key": "region",
							"value": "11",
							"type": "text"
						},
						{
							"key": "municipality",
							"value": "292",
							"type": "text"
						},
						{
							"key": "area",
							"value": "7489",
							"type": "text"
						},
						{
							"key": "alias",
							"value": "Casa de agente",
							"type": "text"
						}
					]
				},
				"url": {
					"raw": "https://{{url_base}}/addresses/v1/create",
					"protocol": "https",
					"host": [
						"{{url_base}}"
					],
					"path": [
						"addresses",
						"v1",
						"create"
					]
				}
			},
			"response": []
		},
		{
			"name": "Editar direccion",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Validar el codigo de respuesta\", function(){\r",
							"    pm.expect(pm.response.code).to.eql(200)\r",
							"})\r",
							"\r",
							"pm.test(\"Validar que hay un body response\", function(){\r",
							"    pm.response.to.be.withBody;\r",
							"})\r",
							"\r",
							"pm.test(\"Validar que en el message del response aparezca la palabra 'modified correctly'\", function(){\r",
							"    let responseJson = pm.response.json()\r",
							"    let addID = pm.environment.get(\"addressID\")\r",
							"    let modified = addID + \" modified correctly\"\r",
							"    pm.expect(responseJson.message).to.be.equal(modified)\r",
							"})\r",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "PUT",
				"header": [
					{
						"key": "Authorization",
						"value": "Basic {{token2UP}}",
						"type": "text"
					}
				],
				"body": {
					"mode": "urlencoded",
					"urlencoded": [
						{
							"key": "contact",
							"value": "Contacto Modificado",
							"type": "text"
						}
					]
				},
				"url": {
					"raw": "https://{{url_base}}/addresses/v1/modify/{{addressID}}",
					"protocol": "https",
					"host": [
						"{{url_base}}"
					],
					"path": [
						"addresses",
						"v1",
						"modify",
						"{{addressID}}"
					]
				}
			},
			"response": []
		},
		{
			"name": "Borrar direccion",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Validar el codigo de respuesta\", function(){\r",
							"    pm.expect(pm.response.code).to.eql(200)\r",
							"})\r",
							"\r",
							"pm.test(\"Validar que hay un body response\", function(){\r",
							"    pm.response.to.be.withBody;\r",
							"})\r",
							"\r",
							"pm.test(\"Validar que en el message del response aparezca la palabra 'deleted correctly'\", function(){\r",
							"    let responseJson = pm.response.json()\r",
							"    let addID = pm.environment.get(\"addressID\")\r",
							"    let modified = addID + \" deleted correctly\"\r",
							"    pm.expect(responseJson.message).to.be.equal(modified)\r",
							"})\r",
							"\r",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "DELETE",
				"header": [
					{
						"key": "Authorization",
						"value": "Basic {{token2UP}}",
						"type": "text"
					}
				],
				"url": {
					"raw": "https://{{url_base}}/addresses/v1/delete/{{addressID}}",
					"protocol": "https",
					"host": [
						"{{url_base}}"
					],
					"path": [
						"addresses",
						"v1",
						"delete",
						"{{addressID}}"
					]
				}
			},
			"response": []
		},
		{
			"name": "Obtener el balance del usuario",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Validar el codigo de respuesta\", function(){\r",
							"    pm.expect(pm.response.code).to.eql(200)\r",
							"})\r",
							"\r",
							"pm.test(\"Validar que hay un body response\", function(){\r",
							"    pm.response.to.be.withBody;\r",
							"})\r",
							"\r",
							"pm.test(\"Validar que el balance sea 0\", function(){\r",
							"    let responseJson = pm.response.json()\r",
							"    pm.expect(responseJson.balance.balance).to.be.equal(0)\r",
							"})\r",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "https://{{url_base}}/credits/v1{{accountId}}",
					"protocol": "https",
					"host": [
						"{{url_base}}"
					],
					"path": [
						"credits",
						"v1{{accountId}}"
					]
				}
			},
			"response": []
		},
		{
			"name": "Obtener el detalle del balance",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Validar el codigo de respuesta\", function(){\r",
							"    pm.expect(pm.response.code).to.eql(200)\r",
							"})\r",
							"\r",
							"pm.test(\"Validar que hay un body response\", function(){\r",
							"    pm.response.to.be.withBody;\r",
							"})\r",
							"\r",
							"pm.test(\"Response time is less than 200ms\", function () {\r",
							"    pm.expect(pm.response.responseTime).to.be.below(300);\r",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Authorization",
						"value": "Basic {{token2UP}}",
						"type": "text"
					}
				],
				"url": {
					"raw": "https://{{url_base}}/tokens/v1/public/balance/detail/{{uuid}}",
					"protocol": "https",
					"host": [
						"{{url_base}}"
					],
					"path": [
						"tokens",
						"v1",
						"public",
						"balance",
						"detail",
						"{{uuid}}"
					]
				}
			},
			"response": []
		},
		{
			"name": "Editar datos del usuario",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"let getTokenRequest = {\r",
							"    method: 'POST',\r",
							"    url: 'https://webapi.segundamano.mx/nga/api/v1.1/private/accounts?lang=es',\r",
							"    header: {\r",
							"        Authorization: 'Basic dGVzdDQ1X3FhQG1haWxpbmF0b3IuY29tOjEyMzQ1Ng=='\r",
							"    }\r",
							"}\r",
							"\r",
							"pm.sendRequest(getTokenRequest, function (err, response) {\r",
							"    console.log(response.json());\r",
							"    var responseJson = response.json()\r",
							"    console.log(responseJson.access_token)\r",
							"\r",
							"    pm.environment.set(\"accessToken\", responseJson.access_token)\r",
							"    //Poner en una variable el accessToken que se genero aqui\r",
							"});"
						],
						"type": "text/javascript"
					}
				},
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Validar el codigo de respuesta\", function(){\r",
							"    pm.expect(pm.response.code).to.eql(200)\r",
							"})\r",
							"\r",
							"pm.test(\"Validar que hay un body response\", function(){\r",
							"    pm.response.to.be.withBody;\r",
							"})\r",
							"\r",
							"pm.test(\"Validar que el email del response sea el indicado\", function(){\r",
							"    let responseJson = pm.response.json()\r",
							"    let email = pm.environment.get(\"email\")\r",
							"    pm.expect(responseJson.account.email).to.be.equal(email)\r",
							"})\r",
							"\r",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"protocolProfileBehavior": {
				"disabledSystemHeaders": {
					"accept": true
				}
			},
			"request": {
				"method": "PATCH",
				"header": [
					{
						"key": "Authorization",
						"value": "tag:scmcoord.com,2013:api {{accessToken}}",
						"type": "text"
					},
					{
						"key": "Accept",
						"value": "application/json, text/plain, */*",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\"account\":{\"name\":\"Laureano Gomez Montes\",\"phone\":\"3319497849\",\"locations\":[{\"code\":\"8\",\"key\":\"region\",\"label\":\"Colima\",\"locations\":[{\"code\":\"104\",\"key\":\"municipality\",\"label\":\"Comala\"}]}],\"professional\":false,\"phone_hidden\":false}}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "https://{{url_base}}/nga/api/v1{{accountId}}?lang=es",
					"protocol": "https",
					"host": [
						"{{url_base}}"
					],
					"path": [
						"nga",
						"api",
						"v1{{accountId}}"
					],
					"query": [
						{
							"key": "lang",
							"value": "es"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "Obtener Resumen",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Validar el codigo de respuesta\", function(){\r",
							"    pm.expect(pm.response.code).to.eql(200)\r",
							"})\r",
							"\r",
							"pm.test(\"Validar que hay un body response\", function(){\r",
							"    pm.response.to.be.withBody;\r",
							"})\r",
							"\r",
							"pm.test(\"Status code name has string\", function () {\r",
							"    pm.response.to.have.status(\"OK\");\r",
							"});\r",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"protocolProfileBehavior": {
				"disabledSystemHeaders": {
					"accept": true
				}
			},
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Authorization",
						"value": "tag:scmcoord.com,2013:api {{accessToken}}",
						"type": "text"
					},
					{
						"key": "Accept",
						"value": "application/json, text/plain, */*",
						"type": "text"
					}
				],
				"url": {
					"raw": "https://{{url_base}}/nga/api/v1.1{{accountId}}/stats?lang=es",
					"protocol": "https",
					"host": [
						"{{url_base}}"
					],
					"path": [
						"nga",
						"api",
						"v1.1{{accountId}}",
						"stats"
					],
					"query": [
						{
							"key": "lang",
							"value": "es"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "Busqueda articulos",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Validar el codigo de respuesta\", function(){\r",
							"    pm.expect(pm.response.code).to.eql(200)\r",
							"})\r",
							"\r",
							"pm.test(\"Validar que hay un body response\", function(){\r",
							"    pm.response.to.be.withBody;\r",
							"})\r",
							"\r",
							"pm.test(\"Validar que en el link del response aparezca la palabra 'autos'\", function(){\r",
							"    let responseJson = pm.response.json()\r",
							"    pm.expect(responseJson.data.urls[0]).to.be.equal('/anuncios/mexico?q=autos')\r",
							"})\r",
							"\r",
							"\r",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"protocolProfileBehavior": {
				"disabledSystemHeaders": {
					"accept": true
				}
			},
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Authorization",
						"value": "tag:scmcoord.com,2013:api {{accessToken}}",
						"type": "text",
						"disabled": true
					},
					{
						"key": "Accept",
						"value": "application/json, text/plain, */*",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\"ad_listing_service_filters\":{\"q\":\"autos\"}}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "https://{{url_base}}/urls/v1/public/ad-listing",
					"protocol": "https",
					"host": [
						"{{url_base}}"
					],
					"path": [
						"urls",
						"v1",
						"public",
						"ad-listing"
					]
				}
			},
			"response": []
		},
		{
			"name": "Obtener tiendas",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Validar el codigo de respuesta\", function(){\r",
							"    pm.expect(pm.response.code).to.eql(200)\r",
							"})\r",
							"\r",
							"pm.test(\"Validar que hay un body response\", function(){\r",
							"    pm.response.to.be.withBody;\r",
							"})\r",
							"\r",
							"pm.test(\"Validar que por lo menos arroje una tienda como redultado \", function(){\r",
							"    var responseJson = pm.response.json()\r",
							"    pm.expect(responseJson.total_count).to.be.greaterThan(0)\r",
							"})\r",
							"\r",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "https://{{url_base}}/shops/api/v1/public/shops?limit=15&search=piezas&cat=2000&reg=16",
					"protocol": "https",
					"host": [
						"{{url_base}}"
					],
					"path": [
						"shops",
						"api",
						"v1",
						"public",
						"shops"
					],
					"query": [
						{
							"key": "limit",
							"value": "15"
						},
						{
							"key": "search",
							"value": "piezas"
						},
						{
							"key": "cat",
							"value": "2000"
						},
						{
							"key": "reg",
							"value": "16"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "Crear alerta",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"let getTokenRequest = {\r",
							"    method: 'POST',\r",
							"    url: 'https://webapi.segundamano.mx/nga/api/v1.1/private/accounts?lang=es',\r",
							"    header: {\r",
							"        Authorization: 'Basic dGVzdDQ1X3FhQG1haWxpbmF0b3IuY29tOjEyMzQ1Ng=='\r",
							"    }\r",
							"}\r",
							"\r",
							"\r",
							"pm.sendRequest(getTokenRequest, function (err, response) {\r",
							"    console.log(response.json());\r",
							"    var responseJson = response.json()\r",
							"    console.log(responseJson.access_token)\r",
							"\r",
							"    pm.environment.set(\"accessToken\", responseJson.access_token)\r",
							"    //Poner en una variable el accessToken que se genero aqui\r",
							"});\r",
							"\r",
							"var uuid = pm.environment.get('uuid')\r",
							"var token = pm.environment.get('accessToken')\r",
							"\r",
							"console.log(\"TokenGet:\", token)\r",
							"\r",
							"var preencode = (uuid).concat(':',(token));\r",
							"\r",
							"var encoded = CryptoJS.enc.Base64.stringify(CryptoJS.enc.Utf8.parse(preencode))\r",
							"pm.environment.set('token2UP', encoded)\r",
							"\r",
							"console.log(encoded)"
						],
						"type": "text/javascript"
					}
				},
				{
					"listen": "test",
					"script": {
						"exec": [
							"//Seteo de variables\r",
							"let responseJson = pm.response.json()\r",
							"\r",
							"pm.environment.set('alert_id', responseJson.data.alert.id)\r",
							"\r",
							"//Tests\r",
							"\r",
							"pm.test(\"Successful POST request\", function () {\r",
							"    pm.expect(pm.response.code).to.be.oneOf([201, 202]);\r",
							"});\r",
							"\r",
							"pm.test(\"Validar que hay un body response\", function(){\r",
							"    pm.response.to.be.withBody;\r",
							"})\r",
							"\r",
							"pm.test(\"Prueba negativa, telefono sin lada no debe ser valido\", function(){\r",
							"    let responseJson = pm.response.json()\r",
							"    let alertId = pm.environment.get('alert_id')\r",
							"    pm.expect(responseJson.data.alert.id).to.be.equal(alertId)\r",
							"})\r",
							"\r",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"protocolProfileBehavior": {
				"disabledSystemHeaders": {
					"accept": true
				}
			},
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Accept",
						"value": "accept: application/json, text/plain, */*",
						"type": "text"
					},
					{
						"key": "Authorization",
						"value": "Basic {{token2UP}}",
						"type": "text"
					},
					{
						"key": "Origin",
						"value": "https://www.segundamano.mx",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\"ad_listing_service_filters\":{\"region\":\"16\",\"municipality\":\"589\",\"category_lv0\":\"5000\",\"category_lv1\":\"5040\",\"label\":\"1\",\"sort\":\"price\"}}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "https://{{url_base}}/alerts/v1/private/account/{{uuid}}/alert",
					"protocol": "https",
					"host": [
						"{{url_base}}"
					],
					"path": [
						"alerts",
						"v1",
						"private",
						"account",
						"{{uuid}}",
						"alert"
					]
				}
			},
			"response": []
		},
		{
			"name": "Borrar alerta",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"let getTokenRequest = {\r",
							"    method: 'POST',\r",
							"    url: 'https://webapi.segundamano.mx/nga/api/v1.1/private/accounts?lang=es',\r",
							"    header: {\r",
							"        Authorization: 'Basic dGVzdDQ1X3FhQG1haWxpbmF0b3IuY29tOjEyMzQ1Ng=='\r",
							"    }\r",
							"}\r",
							"\r",
							"\r",
							"pm.sendRequest(getTokenRequest, function (err, response) {\r",
							"    console.log(response.json());\r",
							"    var responseJson = response.json()\r",
							"    console.log(responseJson.access_token)\r",
							"\r",
							"    pm.environment.set(\"accessToken\", responseJson.access_token)\r",
							"    //Poner en una variable el accessToken que se genero aqui\r",
							"});\r",
							"\r",
							"var uuid = pm.environment.get('uuid')\r",
							"var token = pm.environment.get('accessToken')\r",
							"\r",
							"console.log(\"TokenGet:\", token)\r",
							"\r",
							"var preencode = (uuid).concat(':',(token));\r",
							"\r",
							"var encoded = CryptoJS.enc.Base64.stringify(CryptoJS.enc.Utf8.parse(preencode))\r",
							"pm.environment.set('token2UP', encoded)\r",
							"\r",
							"console.log(encoded)"
						],
						"type": "text/javascript"
					}
				},
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Validar el codigo de respuesta\", function(){\r",
							"    pm.expect(pm.response.code).to.eql(200)\r",
							"})\r",
							"\r",
							"pm.test(\"Validar que hay un body response\", function(){\r",
							"    pm.response.to.be.withBody;\r",
							"})\r",
							"\r",
							"pm.test(\"Validar que body response arroje un status 'ok'\", function(){\r",
							"    let responseJson = pm.response.json()\r",
							"    pm.expect(responseJson.data.status).to.be.equal(\"ok\")\r",
							"})"
						],
						"type": "text/javascript"
					}
				}
			],
			"protocolProfileBehavior": {
				"disabledSystemHeaders": {
					"accept": true
				}
			},
			"request": {
				"method": "DELETE",
				"header": [
					{
						"key": "Accept",
						"value": "application/json, text/plain, */*",
						"type": "text"
					},
					{
						"key": "Authorization",
						"value": "Basic {{token2UP}}",
						"type": "text"
					}
				],
				"url": {
					"raw": "https://{{url_base}}/alerts/v1/private/account/{{uuid}}/alert/{{alert_id}}",
					"protocol": "https",
					"host": [
						"{{url_base}}"
					],
					"path": [
						"alerts",
						"v1",
						"private",
						"account",
						"{{uuid}}",
						"alert",
						"{{alert_id}}"
					]
				}
			},
			"response": []
		}
	]
}